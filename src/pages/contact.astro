---
// Enable static generation for this page
export const prerender = true;

import heroBackground from '@/assets/images/G0062626-scaled.jpg';
import CallToAction from '@/components/CallToAction.astro';
import Newsletter from '@/components/Newsletter.astro';
import Hero from '@/components/Hero.astro';
import Icon from '@/components/Icon.astro';
import Layout from '@/components/Layout.astro';
import { SITE_CONFIG } from '@/config/site';

// Breadcrumbs for SEO
// const breadcrumbs = [
//   { name: 'Home', url: '/' },
//   { name: 'Contact Us', url: '/contact' },
// ];
---

<Layout
  title={`Contact Us - ${SITE_CONFIG.name}`}
  description="Get in touch with AnyBody Paddlesports for paddle board tours, equipment rentals, and questions about our services."
  keywords="contact paddleboard tours, AnyBody Paddlesports contact, paddle board rental inquiry, SUP tour questions, California paddleboard contact">
  <!-- Hero Section -->
  <Hero
    title="Contact Us"
    description="Ready to book your adventure or have questions? We're here to help!"
    iconName="phone"
    backgroundImage={heroBackground}
  />

  <!-- Contact Information -->
  <section class="section-padding" aria-labelledby="contact-info">
    <div class="container-custom">
      <div class="grid md:grid-cols-2 gap-12 max-w-6xl mx-auto">
        <!-- Contact Details -->
        <div>
          <h2 id="contact-info" class="text-3xl font-bold text-gray-900 mb-8">
            Get in Touch
          </h2>

          <div class="space-y-6">
            <!-- Phone -->
            <div class="flex items-start space-x-4">
              <div
                class="w-12 h-12 bg-primary-600 rounded-full flex items-center justify-center flex-shrink-0"
                aria-hidden="true">
                <Icon name="phone" class="text-white" />
              </div>
              <div>
                <h3 class="text-lg font-semibold text-gray-900 mb-1">Phone</h3>
                <p class="text-gray-700">
                  <a
                    href={`tel:${SITE_CONFIG.contact.phone.replace(/\D/g, '')}`}
                    class="hover:text-primary-600 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 rounded"
                    aria-label={`Call us at ${SITE_CONFIG.contact.phone}`}>
                    {SITE_CONFIG.contact.phone}
                  </a>
                </p>
                <p class="text-sm text-gray-600">
                  Call or text for quick responses
                </p>
              </div>
            </div>

            <!-- Email -->
            <div class="flex items-start space-x-4">
              <div
                class="w-12 h-12 bg-accent-600 rounded-full flex items-center justify-center flex-shrink-0"
                aria-hidden="true">
                <Icon name="envelope" class="text-white" />
              </div>
              <div>
                <h3 class="text-lg font-semibold text-gray-900 mb-1">Email</h3>
                <p class="text-gray-700">
                  <a
                    href={`mailto:${SITE_CONFIG.contact.email}`}
                    class="hover:text-primary-600 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 rounded"
                    aria-label={`Email us at ${SITE_CONFIG.contact.email}`}>
                    {SITE_CONFIG.contact.email}
                  </a>
                </p>
                <p class="text-sm text-gray-600">
                  We'll respond within 24 hours
                </p>
              </div>
            </div>

            <!-- Location -->
            <div class="flex items-start space-x-4">
              <div
                class="w-12 h-12 bg-primary-600 rounded-full flex items-center justify-center flex-shrink-0"
                aria-hidden="true">
                <Icon name="map-pin" class="text-white" />
              </div>
              <div>
                <h3 class="text-lg font-semibold text-gray-900 mb-1">
                  Service Area
                </h3>
                <p class="text-gray-700">{SITE_CONFIG.contact.address}</p>
                <p class="text-sm text-gray-600">
                  We come to you at various locations
                </p>
              </div>
            </div>
          </div>

          <!-- Social Media -->
          <div class="mt-8">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Follow Us</h3>
            <div class="flex space-x-4" role="list">
              {
                SITE_CONFIG.social.facebook && (
                  <a
                    href={SITE_CONFIG.social.facebook}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
                    aria-label="Follow us on Facebook">
                    <Icon name="facebook" size="sm" />
                  </a>
                )
              }
              {
                SITE_CONFIG.social.instagram && (
                  <a
                    href={SITE_CONFIG.social.instagram}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="w-10 h-10 bg-pink-600 rounded-full flex items-center justify-center text-white hover:bg-pink-700 transition-colors focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2"
                    aria-label="Follow us on Instagram">
                    <Icon name="instagram" size="sm" />
                  </a>
                )
              }
              {
                SITE_CONFIG.social.youtube && (
                  <a
                    href={SITE_CONFIG.social.youtube}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="w-10 h-10 bg-red-600 rounded-full flex items-center justify-center text-white hover:bg-red-700 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
                    aria-label="Follow us on YouTube">
                    <Icon name="youtube" size="sm" />
                  </a>
                )
              }
            </div>
          </div>
        </div>

        <!-- Contact Form -->
        <div class="bg-gray-50 rounded-lg p-8">
          <h2 class="text-2xl font-bold text-gray-900 mb-6">
            Send us a Message
          </h2>

          <form
            action="https://formspree.io/f/YOUR_FORM_ID"
            method="POST"
            class="space-y-6"
            aria-label="Contact form"
            id="contactForm">
            <!-- Honeypot field for spam protection -->
            <input type="text" name="_gotcha" style="display:none" />
            <!-- Custom subject line -->
            <input
              type="hidden"
              name="_subject"
              value="New Contact Form Submission from AnyBody Paddlesports"
            />
            <!-- Redirect after submission (optional) -->
            <input
              type="hidden"
              name="_next"
              value="https://anybodypaddlesports.vercel.app/contact?success=true"
            />

            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label
                  for="firstName"
                  class="block text-sm font-medium text-gray-700 mb-2"
                  >First Name *</label
                >
                <input
                  type="text"
                  id="firstName"
                  name="firstName"
                  required
                  aria-required="true"
                  aria-describedby="firstName-error"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                />
                <div id="firstName-error" class="sr-only" aria-live="polite">
                </div>
              </div>
              <div>
                <label
                  for="lastName"
                  class="block text-sm font-medium text-gray-700 mb-2"
                  >Last Name *</label
                >
                <input
                  type="text"
                  id="lastName"
                  name="lastName"
                  required
                  aria-required="true"
                  aria-describedby="lastName-error"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                />
                <div id="lastName-error" class="sr-only" aria-live="polite">
                </div>
              </div>
            </div>

            <div>
              <label
                for="email"
                class="block text-sm font-medium text-gray-700 mb-2"
                >Email *</label
              >
              <input
                type="email"
                id="email"
                name="email"
                required
                aria-required="true"
                aria-describedby="email-error email-help"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
              />
              <div id="email-help" class="text-sm text-gray-600 mt-1">
                We'll never share your email address
              </div>
              <div id="email-error" class="sr-only" aria-live="polite"></div>
            </div>

            <div>
              <label
                for="phone"
                class="block text-sm font-medium text-gray-700 mb-2"
                >Phone (Optional)</label
              >
              <input
                type="tel"
                id="phone"
                name="phone"
                aria-describedby="phone-help"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
              />
              <div id="phone-help" class="text-sm text-gray-600 mt-1">
                Include your phone number for faster responses
              </div>
            </div>

            <div>
              <label
                for="subject"
                class="block text-sm font-medium text-gray-700 mb-2"
                >Subject *</label
              >
              <select
                id="subject"
                name="subject"
                required
                aria-required="true"
                aria-describedby="subject-error"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                <option value="">Select a subject</option>
                <option value="booking">Booking Inquiry</option>
                <option value="locations">Location Questions</option>
                <option value="equipment">Equipment Information</option>
                <option value="pricing">Pricing Questions</option>
                <option value="other">Other</option>
              </select>
            </div>

            <div>
              <label
                for="message"
                class="block text-sm font-medium text-gray-700 mb-2"
                >Message</label
              >
              <textarea
                id="message"
                name="message"
                rows="4"
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                placeholder="Tell us about your paddle boarding interests, group size, preferred dates, or any questions you have..."
              ></textarea>
            </div>

            <button
              type="submit"
              id="submitButton"
              class="w-full bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
              Send Message
            </button>

            <!-- Success/Error messages will be handled by URL params or Formspree -->
            <div id="formStatus" class="hidden" role="alert" aria-live="polite">
            </div>
          </form>

          <p class="text-sm text-gray-600 mt-4">
            We typically respond within 48 hours. For immediate assistance,
            please call us at {SITE_CONFIG.contact.phone}.
          </p>
        </div>
      </div>
    </div>
  </section>

  <Newsletter />

  <!-- Quick Booking CTA -->
  <CallToAction
    title="Ready to Book?"
    description="Skip the wait and book your paddle boarding adventure directly online"
    showContactButton={false}
  />
</Layout>

<script>
  // Check for success message from Formspree redirect
  document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const formStatus = document.getElementById('formStatus') as HTMLElement;

    if (urlParams.get('success') === 'true') {
      formStatus.className =
        'bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded';
      formStatus.textContent =
        "Thank you! Your message has been sent successfully. We'll get back to you within 24 hours.";
      formStatus.classList.remove('hidden');

      // Clean up URL
      window.history.replaceState({}, document.title, window.location.pathname);
    }
  });
</script>
